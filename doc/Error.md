## Ошибки

В системе MoniQue могут возникать ошибки.
Это не плохо и не хорошо.
Это - жизнь.
Например, ошибки могут возникать при распаковке сообщения или при работе компонента.

Чтобы уметь с этими ошибками работать, в протоколе предусмотрен [специальный](Protocol.md#type) тип сообщения: `error`.
Более того, для возможности обработки ошибок различными системами и компонентами, поле `data`, которое описано [ниже](Protocol.md#data), для данного типа кодируется с помощью JSON и имеет следующий фиксированный вид:

```
{
  code: int,
  message: str
}
```

Таким образом, полное сообщение об ошибке (если его распаковать из MessagePack) может иметь следующий вид:
```
{ id = "...", 
  pid = "...", 
  creator = "...", 
  created_at = 1526632194003, 
  expires_at = 0, 
  spec = "error", 
  encoding = "JSON", 
  type = "error", 
  data = "{\"code\":500,\"message\":\"...\"}"
 }
```

Как можно заметить, `data` сообщения состоит из двух полей.
Поле `message` является описанием той ошибки или проблемы, которая произошла.

Поле `code` в сообщении указывает на природу возникновения ошибки.
На текущий момент все коды ошибок перечислены в [данном](../src/System/MQ/Error/Internal/Types.hs) месте.

При разработке библиотеки для компонента на новом языке программирования считается уместным использовать все коды (при возникновении соответствующей ошибки).
При разработке же компонента (сервиса) считается, что при возниковении ошибки ей присваевается код из диапазона 5xx.
